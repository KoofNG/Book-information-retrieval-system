(function(t){function e(e){for(var r,i,s=e[0],u=e[1],c=e[2],d=0,v=[];d<s.length;d++)i=s[d],a[i]&&v.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(v.length)v.shift()();return n.push.apply(n,c||[]),o()}function o(){for(var t,e=0;e<n.length;e++){for(var o=n[e],r=!0,s=1;s<o.length;s++){var u=o[s];0!==a[u]&&(r=!1)}r&&(n.splice(e--,1),t=i(i.s=o[0]))}return t}var r={},a={app:0},n=[];function i(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=r,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(o,r,function(e){return t[e]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var l=u;n.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var r=o("64a9"),a=o.n(r);a.a},"09ce":function(t,e,o){"use strict";var r=o("f0c8"),a=o.n(r);a.a},"09ec":function(t,e,o){},"14ef":function(t,e,o){},"1afb":function(t,e,o){},"20cd":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("f751"),o("097d");var r=o("2b0e"),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},n=[],i=(o("034f"),o("2877")),s={},u=Object(i["a"])(s,a,n,!1,null,null,null),c=u.exports,l=o("8c4f"),d=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Navigation"),t._m(0),o("Random"),o("Footer")],1)},v=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"searchBox"},[o("div",{staticClass:"content"},[o("p",[t._v("Find a book")])])])}],m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"pad-top-bottom",attrs:{id:"navigation"}},[t._m(0),o("div",{staticClass:"accounts"},[o("h1",{on:{click:t.showMenu}},[t._v("☰")])]),o("div",{attrs:{id:"menus"}},[o("div",{staticClass:"links"},[o("ul",[o("li",[o("router-link",{attrs:{to:"/Home"}},[t._v("Home")])],1),o("li",[o("router-link",{attrs:{to:"/search"}},[t._v("Search")])],1),t.allowAdmins?o("li",[o("router-link",{attrs:{to:"/createBook"}},[t._v("Create Book")])],1):t._e(),o("li",[o("router-link",{attrs:{to:"/viewRequest"}},[t._v("View Request Book")])],1),o("li",[o("button",{on:{click:t.logout}},[t._v("Logout")])])])])])])},h=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"brandName"},[o("h1",[t._v("Book Information Retrieval")])])}],f={data:function(){return{allowAdmins:Boolean}},methods:{showMenu:function(){var t=document.querySelector("#menus");t.classList.toggle("active")},logout:function(t){t.preventDefault();var e=window.localStorage.getItem("user");e&&(window.localStorage.removeItem("user"),this.$router.push("/"))}},mounted:function(){var t=JSON.parse(window.localStorage.getItem("user"));"student"===t.status||"staff"===t.status?this.allowAdmins=!1:this.allowAdmins=!0}},p=f,g=(o("09ce"),Object(i["a"])(p,m,h,!1,null,"66e8d462",null)),_=g.exports,y=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},b=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"footer"}},[o("p",[t._v("© 2019 - Book Information Retrieval System")])])}],k={},w=k,q=(o("d7f4"),Object(i["a"])(w,y,b,!1,null,"fea73d04",null)),C=q.exports,P=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"Random"}},t._l(t.randomBooks,function(e,r){return o("div",{key:r,attrs:{id:"bookCard"}},[o("div",{staticClass:"banner"}),o("div",{staticClass:"content"},[o("h2",[t._v(t._s(e.title))]),o("h3",[t._v(t._s(e.author))]),o("div",[o("p",[t._v(t._s(new Date(e.publicationYear).getFullYear()))]),o("p",[t._v(t._s(e.edition))]),o("p",[t._v("Available: "),o("span",[t._v(t._s(e.quantity))])])])])])}),0)},B=[],S={data:function(){return{randomBooks:[]}},mounted:function(){var t=this;fetch("/books/random").then(function(t){return t.json()}).then(function(e){t.randomBooks=e.slice()})}},x=S,E=(o("5a34"),Object(i["a"])(x,P,B,!1,null,"4f97a145",null)),N=E.exports,A={components:{Navigation:_,Random:N,Footer:C},data:function(){return{searchParam:""}},methods:{mainSearch:function(){this.$router.push()}},mounted:function(){var t=window.localStorage.getItem("user");if(t)return!0;this.$router.push("/")}},O=A,$=(o("89f5"),Object(i["a"])(O,d,v,!1,null,"9bb1e920",null)),j=$.exports,L=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Navigation"),o("div",{attrs:{id:"wraps"}},[o("div",{attrs:{id:"createBookForm"}},[o("h3",[t._v("Create New Book Record")]),o("form",{attrs:{action:"",method:"post"},on:{submit:function(t){t.preventDefault()}}},[o("Loader"),o("div",[t._m(0),o("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",name:"",id:"book-title",required:"required",placeholder:"Book Title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),o("div",[t._m(1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.author,expression:"author"}],attrs:{type:"text",name:"",id:"author-name",required:"required",placeholder:"Author's Name"},domProps:{value:t.author},on:{input:function(e){e.target.composing||(t.author=e.target.value)}}})]),o("div",[t._m(2),o("input",{directives:[{name:"model",rawName:"v-model",value:t.edition,expression:"edition"}],attrs:{type:"text",name:"",id:"edition",required:"required",placeholder:"6th Edition"},domProps:{value:t.edition},on:{input:function(e){e.target.composing||(t.edition=e.target.value)}}})]),o("div",[o("label",{attrs:{for:""}},[t._v("Quantity")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"qty"}],attrs:{type:"text",name:"",id:"",placeholder:"1"},domProps:{value:t.qty},on:{input:function(e){e.target.composing||(t.qty=e.target.value)}}})]),o("div",[t._m(3),o("select",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],attrs:{name:"book-category",required:"required",id:"book-categorry"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.category=e.target.multiple?o:o[0]}}},[o("option",{attrs:{value:"0",disabled:""}},[t._v("Choose Book Category")]),t._l(t.categories,function(e,r){return o("option",{key:r,domProps:{value:e}},[t._v(t._s(e))])})],2)]),o("div",[t._m(4),o("input",{directives:[{name:"model",rawName:"v-model",value:t.yearOfPub,expression:"yearOfPub"}],attrs:{type:"text",name:"",id:"year",required:"required",placeholder:"1995"},domProps:{value:t.yearOfPub},on:{input:function(e){e.target.composing||(t.yearOfPub=e.target.value)}}})]),o("div",[o("button",{attrs:{type:"submit"},on:{click:t.createBook}},[t._v("Submit New Book")])])],1)])]),o("Footer")],1)},R=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"book-title"}},[t._v("\n            Book Title\n            "),o("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"author-name"}},[t._v("\n            Author\n            "),o("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"edition"}},[t._v("\n            Edition\n            "),o("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"book-category"}},[t._v("\n            Book Category\n            "),o("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"year"}},[t._v("\n            Year of Publication\n            "),o("span",{staticClass:"required"},[t._v("*")])])}],T=o("f499"),D=o.n(T),I=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"loader"}})},F=[],Y={},H=Y,J=(o("66ca"),Object(i["a"])(H,I,F,!1,null,"a54953ce",null)),M=J.exports,U={components:{Navigation:_,Loader:M,Footer:C},data:function(){return{qty:"",title:"",author:"",edition:"",category:"",yearOfPub:"",categories:[]}},methods:{createBook:function(){var t=this,e=document.querySelector("#loader"),o={title:this.title,author:this.author,edition:this.edition,category:this.category,quantity:this.qty,publicationYear:this.yearOfPub};if(""!==(this.title&&this.author&&this.edition&&this.publisher&&this.category&&this.yearOfPub)&&e){e.classList.add("active");var r="/books/addBook";fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:D()(o)}).then(function(t){return t.json()}).then(function(o){return alert("Book Created Successfully"),e.classList.remove("active"),t.$router.push("/Home")}).catch(function(t){return console.log("Error:",t)})}}},mounted:function(){var t=this,e=window.localStorage.getItem("user");console.log(this),e?fetch("/books/categories").then(function(t){return t.json()}).then(function(e){return t.categories=e.slice()}):this.$router.push("/")}},Q=U,V=(o("b199"),Object(i["a"])(Q,L,R,!1,null,null,null)),K=V.exports,W=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Navigation"),o("div",{attrs:{id:"search-w"}},[o("Search",{on:{search:t.find}}),o("div",{attrs:{id:"search-result"}},[o("Loader"),o("div",{staticClass:"result"},[o("h3",{attrs:{id:"header"}},[t._v("Search Results")]),t._l(t.searchResult,function(e,r){return o("div",{key:r,attrs:{id:"book-search-result-card"}},[o("h4",[t._v(t._s(e.title))]),o("h5",[t._v(t._s(e.author))]),o("h6",[t._v(t._s(new Date(e.publicationYear).getFullYear()))]),o("h6",[t._v(t._s(e.edition))]),o("p",{staticClass:"forClick",on:{click:function(o){return t.viewChildren(e._id)}}},[t._v("See quantities available ("+t._s(e.quantity)+") ")]),t.isAdmin?o("div",[o("button",{attrs:{id:"edit"},on:{click:function(o){return t.editBook(e._id)}}},[t._v("edit")]),o("button",{attrs:{id:"delete"},on:{click:function(o){return t.bookDelete(e._id)}}},[t._v("delete")])]):t._e()])})],2)],1)],1),o("Footer")],1)},z=[],G=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"search-form"}},[o("form",{attrs:{action:"",method:"get"},on:{submit:function(t){t.preventDefault()}}},[o("h3",[t._v("Search for a Book")]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.searchCategory,expression:"searchCategory"}],attrs:{name:"",id:"set"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.searchCategory=e.target.multiple?o:o[0]}}},[o("option",{attrs:{value:"author"}},[t._v("By Author")]),o("option",{attrs:{value:"title"}},[t._v("By Title")]),o("option",{attrs:{value:"category"}},[t._v("By Category")])]),"title"==t.searchCategory?o("div",[o("label",{attrs:{for:"book-title"}},[t._v("Book Title")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.paramDict["title"],expression:"paramDict['title']"}],attrs:{type:"text",name:"",id:"book-title",placeholder:"eg: Control Engineering"},domProps:{value:t.paramDict["title"]},on:{input:function(e){e.target.composing||t.$set(t.paramDict,"title",e.target.value)}}})]):"author"==t.searchCategory?o("div",[o("label",{attrs:{for:"book-author"}},[t._v("Book Author")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.paramDict["author"],expression:"paramDict['author']"}],attrs:{type:"text",name:"",id:"book-author",placeholder:"eg: B. K. Oguta"},domProps:{value:t.paramDict["author"]},on:{input:function(e){e.target.composing||t.$set(t.paramDict,"author",e.target.value)}}})]):o("div",[o("label",{attrs:{for:"book-category"}},[t._v("Book Category")]),o("select",{directives:[{name:"model",rawName:"v-model",value:t.paramDict["category"],expression:"paramDict['category']"}],attrs:{name:"",id:"book-category"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.paramDict,"category",e.target.multiple?o:o[0])}}},[o("option",{attrs:{value:""}},[t._v("Choose Book Category")]),t._l(t.categories,function(e,r){return o("option",{key:r,domProps:{value:e}},[t._v(t._s(e))])})],2)]),o("div",[o("button",{attrs:{type:"submit"},on:{click:t.search}},[t._v("Search")])])])])},X=[],Z={data:function(){return{paramDict:{author:null,category:null,title:null},bookTitle:"",bookAuthor:"",category:"",searchCategory:"author",isActive:!1,categories:[],searchResult:[]}},methods:{search:function(){var t=this,e=document.querySelector("#loader"),o=document.querySelector("#header");e&&e.classList.add("active");var r="/books/".concat(this.searchCategory,"/").concat(this.paramDict[this.searchCategory]);fetch(r).then(function(t){return t.json()}).then(function(r){0!==r.length?(e.classList.remove("active"),document.querySelector(".result").classList.add("active"),t.searchResult=r.slice(),o.innerHTML="Search Results",t.$emit("search",t.searchResult)):(e.classList.remove("active"),document.querySelector(".result").classList.add("active"),o.innerHTML="No record found")}).catch(function(){e.classList.remove("active"),alert("Search Unsuccessful")})}},mounted:function(){var t=this;fetch("/books/categories").then(function(t){return t.json()}).then(function(e){return t.categories=e.slice()})}},tt=Z,et=(o("e802"),Object(i["a"])(tt,G,X,!1,null,"45fdfe00",null)),ot=et.exports,rt={components:{Navigation:_,Search:ot,Loader:M,Footer:C},data:function(){return{isActive:!1,isAdmin:Boolean,searchResult:[]}},methods:{find:function(t){this.searchResult=t.slice()},viewChildren:function(t){this.$router.push({path:"/viewBooks/".concat(t)})},requestBook:function(t,e){var o=JSON.parse(window.localStorage.getItem("user")),r=o._id,a=o.username;fetch("/requests/addRequest",{method:"POST",headers:{"Content-Type":"application/json"},body:D()({userId:r,requesterName:a,bookId:t})}).then(function(t){return t.json()}).then(function(t){window.localStorage.setItem("user",D()(t)),alert("Book as being requested"),console.log(t)})},editBook:function(t){this.$router.push({path:"/updateBook/".concat(t)})},bookDelete:function(t){var e=this;fetch("/books/remove/".concat(t)).then(function(t){return t.json()}).then(function(o){"unsuccesful"===o.status?alert("Book not deleted"):(alert("Book deleted"),e.searchResult=e.searchResult.filter(function(e){return e._id!==t}))}).catch(function(){alert("Book not Deleted")})}},mounted:function(){var t=window.localStorage.getItem("user");if(t){var e=JSON.parse(t),o=document.querySelector("#loader");return o&&o.classList.remove("active"),"student"===e.status||"staff"===e.status?this.isAdmin=!1:this.isAdmin=!0,!0}this.$router.push("/")}},at=rt,nt=(o("9e64"),Object(i["a"])(at,W,z,!1,null,null,null)),it=nt.exports,st=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Navigation"),o("div",{attrs:{id:"content-w"}},[o("div",{attrs:{id:"wraps"}},[o("div",{attrs:{id:"updateBookRecord"}},[o("h3",[t._v("Update Book Record")]),o("form",{attrs:{action:"",method:"post"},on:{submit:function(t){t.preventDefault()}}},[o("div",[t._m(0),o("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",name:"",id:"title",required:"required",placeholder:"Book Title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),o("div",[t._m(1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.author,expression:"author"}],attrs:{type:"text",name:"",id:"author-name",required:"required",placeholder:"Author's Name"},domProps:{value:t.author},on:{input:function(e){e.target.composing||(t.author=e.target.value)}}})]),o("div",[o("label",{attrs:{for:""}},[t._v("Edition")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.edition,expression:"edition"}],attrs:{type:"text",id:"",placeholder:"edition"},domProps:{value:t.edition},on:{input:function(e){e.target.composing||(t.edition=e.target.value)}}})]),o("div",[o("label",{attrs:{for:""}},[t._v("Quantity")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.qty,expression:"qty"}],attrs:{type:"text",id:"",placeholder:"Book Publisher"},domProps:{value:t.qty},on:{input:function(e){e.target.composing||(t.qty=e.target.value)}}})]),o("div",[t._m(2),o("select",{directives:[{name:"model",rawName:"v-model",value:t.bookCategory,expression:"bookCategory"}],attrs:{name:"book-category",required:"required",id:"book-category"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.bookCategory=e.target.multiple?o:o[0]}}},[o("option",{attrs:{disabled:"",value:""}},[t._v("Choose Book Category")]),o("option",{attrs:{selected:""},domProps:{value:t.bookCategory}},[t._v(t._s(t.bookCategory))]),t._l(t.categories,function(e,r){return o("option",{key:r,domProps:{value:e}},[t._v("\n                "+t._s(e)+"\n              ")])})],2)]),o("div",[t._m(3),o("input",{directives:[{name:"model",rawName:"v-model",value:t.yearOfPub,expression:"yearOfPub"}],attrs:{type:"text",name:"",id:"year",required:"required",placeholder:"1995"},domProps:{value:t.yearOfPub},on:{input:function(e){e.target.composing||(t.yearOfPub=e.target.value)}}})]),o("div",[o("button",{attrs:{type:"submit"},on:{click:t.updateBook}},[t._v("Update Book Record")])])])])])]),o("Footer")],1)},ut=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"title"}},[t._v("\n              Book Title\n              "),o("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"author-name"}},[t._v("\n              Author\n              "),o("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"book-category"}},[t._v("\n              Book Category\n              "),o("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("label",{attrs:{for:"year"}},[t._v("\n              Year of Publication\n              "),o("span",{staticClass:"required"},[t._v("*")])])}],ct={components:{Navigation:_,Footer:C},data:function(){return{title:"",author:"",edition:"",qty:"",yearOfPub:"",bookCategory:"",id:"",categories:[]}},methods:{updateBook:function(){var t={title:this.title,author:this.author,edition:this.edition,category:this.bookCategory,quantity:this.qty,publicationYear:this.yearOfPub},e="/books/update/".concat(this.id);fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:D()(t)}).then(function(t){return t.json()}).then(function(t){console.log("Success:",D()(t))}).catch(function(t){console.log("Error:",t)})}},mounted:function(){var t=this,e=window.localStorage.getItem("user");if(e){var o=this.$route.params.id;return fetch("/books/getOne/".concat(o)).then(function(t){return t.json()}).then(function(e){t.title=e.title,t.author=e.author,t.edition=e.edition,t.qty=e.quantity,t.bookCategory=e.category,t.yearOfPub=new Date(e.publicationYear).getFullYear(),t.id=e._id}),fetch("/books/categories").then(function(t){return t.json()}).then(function(e){return t.categories=e.slice()}),!0}this.$router.push("/")}},lt=ct,dt=(o("cf9e"),Object(i["a"])(lt,st,ut,!1,null,"5862659b",null)),vt=dt.exports,mt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Navigation"),o("div",{attrs:{id:"request"}},t._l(t.requestArray,function(e,r){return o("div",{key:r,attrs:{id:"book-request"}},[o("div",{staticClass:"user"},[o("h2",[t._v(t._s(e.bookId.title))]),o("h6",[t._v(t._s(e.requesterName)+" requested for this book")])]),t.isAdmin?o("div",{staticClass:"actions"},[o("button",{on:{click:function(o){return t.approveBook(e._id)}}},[t._v("Approve")])]):o("div",{staticClass:"actions"},[o("div",{class:{active:"approved"==e.status},attrs:{id:"indicator"}},[o("p",[t._v(t._s(e.status))])])])])}),0),o("Footer")],1)},ht=[],ft=o("5d73"),pt=o.n(ft),gt={components:{Navigation:_,Footer:C},data:function(){return{isAdmin:!1,isActive:!1,requestArray:[]}},created:function(){var t=this,e=JSON.parse(window.localStorage.getItem("user"));if("admin"==e.status)this.isAdmin=!0,fetch("/requests").then(function(t){return t.json()}).then(function(e){console.log(e),t.requestArray=e.slice()});else{var o=!0,r=!1,a=void 0;try{for(var n,i=pt()(e.bookRequests);!(o=(n=i.next()).done);o=!0){var s=n.value;console.log(s),fetch("/requests/one/".concat(s)).then(function(t){return t.json()}).then(function(e){t.requestArray.push(JSON.parse(D()(e)))})}}catch(u){r=!0,a=u}finally{try{o||null==i.return||i.return()}finally{if(r)throw a}}}},methods:{approveBook:function(t){console.log(t),fetch("/requests/approveRequest/".concat(t)).then(function(t){return t.json()}).then(function(t){"sucessful"!=t.status?alert("Error occured while approving the book"):alert("Book Approved")})}}},_t=gt,yt=(o("d1b7"),Object(i["a"])(_t,mt,ht,!1,null,"60dab2bc",null)),bt=yt.exports,kt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"mainWrap"}},[o("div",{staticClass:"alert"},[o("p",{domProps:{textContent:t._s(t.msg)}})]),t._m(0),o("div",{attrs:{id:"wraps"}},[o("div",{attrs:{id:"forms"}},[t._m(1),o("div",{staticClass:"user-forms"},[o("Loader",{class:{active:t.authenticating}}),o("div",{staticClass:"active",attrs:{id:"login"}},[o("h1",[t._v("Login")]),o("form",{attrs:{name:"login"},on:{submit:function(t){t.preventDefault()}}},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.logEmail,expression:"logEmail"}],attrs:{type:"email",name:"",id:"logemail",placeholder:"Email Address"},domProps:{value:t.logEmail},on:{input:function(e){e.target.composing||(t.logEmail=e.target.value)}}})]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.logPassword,expression:"logPassword"}],attrs:{type:"password",id:"logpassword",placeholder:"Password"},domProps:{value:t.logPassword},on:{input:function(e){e.target.composing||(t.logPassword=e.target.value)}}})]),o("div",[o("input",{attrs:{type:"submit",value:"Login"},on:{click:t.login}})])])]),o("div",{attrs:{id:"signup"}},[o("h1",[t._v("Sign up")]),o("form",{attrs:{name:"register"},on:{submit:function(t){t.preventDefault()}}},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.regEmail,expression:"regEmail"}],attrs:{type:"email",name:"",id:"email",placeholder:"Email Address"},domProps:{value:t.regEmail},on:{input:function(e){e.target.composing||(t.regEmail=e.target.value)}}})]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.regPassword,expression:"regPassword"}],attrs:{type:"password",id:"password",placeholder:"Password"},domProps:{value:t.regPassword},on:{input:function(e){e.target.composing||(t.regPassword=e.target.value)}}})]),o("div",[o("select",{directives:[{name:"model",rawName:"v-model",value:t.regCategory,expression:"regCategory"}],attrs:{name:"category",id:""},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.regCategory=e.target.multiple?o:o[0]}}},[o("option",{attrs:{value:"",disabled:""}},[t._v("Choose User Category")]),o("option",{attrs:{value:"student"}},[t._v("Student")]),o("option",{attrs:{value:"staff"}},[t._v("Staff")])])]),o("div",[o("input",{attrs:{type:"submit",value:"Register"},on:{click:t.signup}})])])])],1)])]),t._m(2)])},wt=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"navigation-color",attrs:{id:"navigation"}},[o("div",{staticClass:"brandName"},[o("a",{attrs:{href:"/"}},[t._v("Book Information Retrieval System")])])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"links"},[o("div",[o("p",{staticClass:"active",attrs:{id:"login"}},[t._v("Login")])]),o("div",[o("p",{attrs:{id:"signup"}},[t._v("Sign up")])])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"footer-color",attrs:{id:"footer"}},[o("h6",[t._v("\n      © 2019\n    ")])])}],qt={components:{Loader:M},data:function(){return{logEmail:"",logPassword:"",regEmail:"",regPassword:"",regCategory:"",msg:"",authenticating:!1}},mounted:function(){for(var t=this,e=document.querySelectorAll("div.links div p"),o=function(o){var r=e[o];r.addEventListener("click",function(e){var o=document.querySelector("p.active");o.classList.remove("active"),r.classList.add("active");var a=e.target.id,n=document.querySelector("div.user-forms div.active");n.classList.remove("active"),!0===t.authenticating&&(t.authenticating=!1),document.querySelector("div#".concat(a)).classList.add("active")})},r=0;r<e.length;r++)o(r)},methods:{showAlert:function(t){var e=document.querySelector(".alert");e.classList.add("active"),this.msg=t,setTimeout(function(){e.classList.remove("active")},1500)},login:function(){var t=this;""!=this.logEmail&&""!=this.logPassword?(this.authenticating=!0,fetch("/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:D()({username:this.logEmail,password:this.logPassword})}).then(function(t){return t.json()}).then(function(e){var o=e;"invalid password"===e.message?(t.showAlert("Incorrect Password"),t.authenticating=!1):"unknown user"===e.message?(t.showAlert("This account doesnt exist"),t.authenticating=!1):(window.localStorage.setItem("user",D()(o)),t.authenticating=!1,t.$router.push("/Home"))}).catch(function(e){return t.showAlert(e)}),this.authenticating=!1):this.showAlert("Provide Email and Password")},signup:function(){var t=this;""!=this.regEmail&&""!=this.regPassword&&""!=this.regCategory?(this.authenticating=!0,fetch("/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:D()({username:this.regEmail,password:this.regPassword,status:this.regCategory})}).then(function(t){return t.json()}).then(function(e){var o=e;window.localStorage.setItem("user",D()(o)),t.authenticating=!1,t.$router.push("/Home")}).catch(function(e){t.showAlert("An error occured while creating an account"),t.authenticating=!1})):""==this.regEmail||""==this.regPassword||""==this.regCategory?(this.showAlert("All fields are required here"),this.authenticating=!1):this.$router.push("/")}}},Ct=qt,Pt=(o("9bd6"),Object(i["a"])(Ct,kt,wt,!1,null,"fc2e3d88",null)),Bt=Pt.exports,St=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Navigation"),o("div",{staticClass:"wr"},t._l(t.childrenBooks,function(e,r){return o("div",{key:r,attrs:{id:"book-search-result-card"}},[o("h4",[t._v(t._s(e.title)+" - "),o("b",[t._v("ID:"+t._s(e._id))])]),o("h5",[t._v(t._s(e.author))]),o("h6",[t._v(t._s(new Date(e.publicationYear).getFullYear()))]),o("h6",[t._v(t._s(e.edition))]),o("h3",[t._v("STATUS:"),0==e.requested?o("b",[t._v("Available")]):o("b",[t._v("Not Available")])]),o("div",[1!=e.requested?o("button",{attrs:{id:"request"},on:{click:t.decide}},[t._v("request for this book")]):t._e()]),t.decided?o("div",{ref:"bookAlert",refInFor:!0,attrs:{id:"alert"}},[o("p",[t._v("Are you sure you want to borrow this Book?")]),o("div",{staticClass:"btn-group"},[o("button",{attrs:{id:"yes"},on:{click:function(o){return t.requestBook(e._id)}}},[t._v("Yes")]),o("button",{attrs:{id:"no"},on:{click:t.noBorrow}},[t._v("No")])])]):t._e()])}),0),o("Footer")],1)},xt=[],Et={components:{Navigation:_,Footer:C},data:function(){return{childrenBooks:[],decided:!1}},methods:{decide:function(){this.decided=!0},noBorrow:function(t){this.decided=!1},requestBook:function(t){var e=JSON.parse(window.localStorage.getItem("user")),o=e._id,r=e.username;fetch("/requests/addRequest",{method:"POST",headers:{"Content-Type":"application/json"},body:D()({userId:o,requesterName:r,bookId:t})}).then(function(t){return t.json()}).then(function(t){window.localStorage.setItem("user",D()(t)),alert("Book as being requested")}).then(this.decided=!1)}},mounted:function(){var t=this,e=this.$route.params.id;fetch("/books/children/".concat(e)).then(function(t){return t.json()}).then(function(e){t.childrenBooks=e.slice()})}},Nt=Et,At=(o("b8a5"),Object(i["a"])(Nt,St,xt,!1,null,"c7d2fe30",null)),Ot=At.exports;r["a"].use(l["a"]);var $t=new l["a"]({routes:[{path:"/",name:"login",component:Bt},{path:"/Home",name:"home",component:j},{path:"/createBook",name:"createBook",component:K},{path:"/search",name:"search",component:it},{path:"/updateBook/:id",name:"updateBook",component:vt},{path:"/viewRequest",name:"requestBook",component:bt},{path:"/viewBooks/:id",name:"ViewBook",component:Ot}]}),jt=o("2f62");r["a"].use(jt["a"]);var Lt=new jt["a"].Store({state:{},mutations:{},actions:{}});r["a"].config.productionTip=!1,new r["a"]({router:$t,store:Lt,render:function(t){return t(c)}}).$mount("#app")},"5a34":function(t,e,o){"use strict";var r=o("d863"),a=o.n(r);a.a},"64a9":function(t,e,o){},"66ca":function(t,e,o){"use strict";var r=o("a583"),a=o.n(r);a.a},"77d8":function(t,e,o){},8147:function(t,e,o){},"89f5":function(t,e,o){"use strict";var r=o("9d84"),a=o.n(r);a.a},"9bd6":function(t,e,o){"use strict";var r=o("77d8"),a=o.n(r);a.a},"9d84":function(t,e,o){},"9e64":function(t,e,o){"use strict";var r=o("14ef"),a=o.n(r);a.a},a583:function(t,e,o){},b199:function(t,e,o){"use strict";var r=o("8147"),a=o.n(r);a.a},b525:function(t,e,o){},b8a5:function(t,e,o){"use strict";var r=o("20cd"),a=o.n(r);a.a},cf9e:function(t,e,o){"use strict";var r=o("dcaf"),a=o.n(r);a.a},d1b7:function(t,e,o){"use strict";var r=o("09ec"),a=o.n(r);a.a},d7f4:function(t,e,o){"use strict";var r=o("1afb"),a=o.n(r);a.a},d863:function(t,e,o){},dcaf:function(t,e,o){},e802:function(t,e,o){"use strict";var r=o("b525"),a=o.n(r);a.a},f0c8:function(t,e,o){}});
//# sourceMappingURL=app.29e48121.js.map